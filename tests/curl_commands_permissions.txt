# Permission System Test Commands (Windows CMD Format)

# 1. Test project access without authentication (Should fail)
curl -v -X GET http://localhost:8000/api/projects/ ^
  -H "Content-Type: application/json"

# 2. Test project creation without authentication (Should fail)
curl -v -X POST http://localhost:8000/api/projects/ ^
  -H "Content-Type: application/json" ^
  -d "{\"name\":\"Unauthorized Project\",\"description\":\"This should fail\"}"

# 3. Test project update by non-owner (Should fail)
curl -v -X PUT http://localhost:8000/api/projects/1/ ^
  -H "Authorization: Token NON_OWNER_TOKEN_HERE" ^
  -H "Content-Type: application/json" ^
  -d "{\"name\":\"Unauthorized Update\",\"description\":\"This should fail\"}"

# 4. Test issue creation by non-contributor (Should fail)
curl -v -X POST http://localhost:8000/api/projects/1/issues/ ^
  -H "Authorization: Token NON_CONTRIBUTOR_TOKEN_HERE" ^
  -H "Content-Type: application/json" ^
  -d "{\"title\":\"Unauthorized Issue\",\"description\":\"This should fail\"}"

# 5. Test issue update by non-creator and non-owner (Should fail)
curl -v -X PUT http://localhost:8000/api/projects/1/issues/1/ ^
  -H "Authorization: Token NON_CREATOR_TOKEN_HERE" ^
  -H "Content-Type: application/json" ^
  -d "{\"title\":\"Unauthorized Update\",\"description\":\"This should fail\"}"

# 6. Test comment creation by non-contributor (Should fail)
curl -v -X POST http://localhost:8000/api/projects/1/issues/1/comments/ ^
  -H "Authorization: Token NON_CONTRIBUTOR_TOKEN_HERE" ^
  -H "Content-Type: application/json" ^
  -d "{\"content\":\"This should fail\"}"

# 7. Test comment update by non-creator and non-owner (Should fail)
curl -v -X PUT http://localhost:8000/api/projects/1/issues/1/comments/1/ ^
  -H "Authorization: Token NON_CREATOR_TOKEN_HERE" ^
  -H "Content-Type: application/json" ^
  -d "{\"content\":\"This should fail\"}"

# 8. Test contributor management by non-owner (Should fail)
curl -v -X POST http://localhost:8000/api/projects/1/contributors/ ^
  -H "Authorization: Token NON_OWNER_TOKEN_HERE" ^
  -H "Content-Type: application/json" ^
  -d "{\"user\":2,\"role\":\"contributor\"}"

# 9. Test project deletion by non-owner (Should fail)
curl -v -X DELETE http://localhost:8000/api/projects/1/ ^
  -H "Authorization: Token NON_OWNER_TOKEN_HERE"

# 10. Test issue deletion by non-creator and non-owner (Should fail)
curl -v -X DELETE http://localhost:8000/api/projects/1/issues/1/ ^
  -H "Authorization: Token NON_CREATOR_TOKEN_HERE"

# 11. Test comment deletion by non-creator and non-owner (Should fail)
curl -v -X DELETE http://localhost:8000/api/projects/1/issues/1/comments/1/ ^
  -H "Authorization: Token NON_CREATOR_TOKEN_HERE"

# 12. Test read access by authenticated user (Should succeed)
curl -v -X GET http://localhost:8000/api/projects/ ^
  -H "Authorization: Token TOKEN_HERE"

# 13. Test read access by project contributor (Should succeed)
curl -v -X GET http://localhost:8000/api/projects/1/issues/ ^
  -H "Authorization: Token CONTRIBUTOR_TOKEN_HERE"

# Notes:
# - Replace TOKEN_HERE with a valid authentication token
# - Replace NON_OWNER_TOKEN_HERE with a token of a non-owner user
# - Replace NON_CONTRIBUTOR_TOKEN_HERE with a token of a non-contributor user
# - Replace NON_CREATOR_TOKEN_HERE with a token of a non-creator user
# - Replace CONTRIBUTOR_TOKEN_HERE with a token of a project contributor
# - The project ID (1) in the URLs should be replaced with the actual project ID
# - The issue ID (1) in the URLs should be replaced with the actual issue ID
# - The comment ID (1) in the URLs should be replaced with the actual comment ID
# - The user ID (2) in the requests should be replaced with the actual user ID
# - The server should be running on localhost:8000
# - In Windows CMD, use ^ for line continuation
# - Use double quotes for JSON data and escape inner quotes with \"
# - The -v flag is for verbose output (helpful for debugging) 